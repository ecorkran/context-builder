---
layer: project
phase: 3
phaseName: hld
guideRole: primary
audience: [human, ai]
description: High-level design for context-builder Electron application
dependsOn: [01-concept.context-builder.md, 02-spec.context-builder.md]
---

# High-Level Design: context-builder

## System Overview

context-builder is an Electron desktop application that automates the generation of structured context prompts for Claude Code sessions. The application provides a local, persistent workspace where developers manage multiple projects and generate consistent context formatting.

**Key Architectural Decisions:**
- **Local-first design:** No network dependencies, all data stored locally
- **Component reuse:** Built on manta-templates ui-core for consistency and speed
- **Template-driven generation:** Structured prompt assembly from configurable components
- **Split-pane interface:** Clear separation between input controls and output preview

**Technology Stack Summary:**
- Electron (desktop framework)
- React 18+ (UI framework)
- TypeScript (type safety)
- Tailwind CSS v4 (styling)
- Radix UI (accessible primitives)
- manta-templates ui-core (component library)

## Major Components

### 1. Application Shell (Electron Main Process)
- Window management and lifecycle
- File system access for project data persistence
- Clipboard integration for copy operations
- Menu and application-level controls

### 2. UI Renderer (React Application)
- **Project Selector:** Dropdown for switching between configured projects
- **Configuration Panel:** Form controls for project parameters (template, slice, monorepo status)
- **Template Selector:** Dropdown for instruction prompt selection
- **Input Areas:** Text areas for recent events and additional notes
- **Output Panel:** Large scrollable text display with copy functionality
- **Layout Manager:** Split-pane responsive layout system

### 3. Data Layer
- **Project Store:** JSON-based persistence for project configurations
- **Template Library:** Static prompt templates with metadata
- **Context Generator:** Template assembly engine with variable substitution

### 4. Core Services
- **ProjectService:** CRUD operations for project management
- **TemplateService:** Template loading and metadata management
- **GeneratorService:** Context assembly and formatting logic
- **PersistenceService:** File system operations and data serialization

## Data Flow

### Project Configuration Flow
1. User selects project from dropdown → ProjectService loads configuration
2. Configuration updates → Form fields populate → Auto-save to local storage
3. Project switching → Current state persisted → New project state loaded

### Context Generation Flow
1. Form inputs change → Real-time validation and preview update
2. Template selection → Template metadata loaded → Generator engine triggered
3. Generate action → Template assembly with variable substitution → Output panel updated
4. Copy action → Formatted context transferred to system clipboard

### Data Storage Flow
1. Project data → JSON serialization → Local file system (app data directory)
2. Application startup → File system scan → Project list hydration
3. Configuration changes → Immediate persistence → No data loss on app closure

## Integration Points

### Internal Integrations
- **manta-templates ui-core:** Form components, buttons, layout primitives
- **Radix UI components:** Dropdown selectors, text areas, accessible interactions
- **Tailwind CSS:** Styling system integration with existing design tokens

### External Integrations
- **System Clipboard:** Native clipboard API for copy operations
- **File System:** Local JSON storage in platform-appropriate app data directory
- **Desktop Environment:** Native window controls, keyboard shortcuts, system notifications

### Template Integration
- **System Prompt Templates:** Referenced from existing `prompt.ai-project.system.md`
- **Project Guide Integration:** Compatible with ai-project-guide methodology
- **Context Format Standards:** Maintains consistency with existing Claude Code patterns

## Infrastructure Requirements

### Development Environment
- Node.js (current LTS) for Electron build toolchain
- npm/yarn package management
- TypeScript compiler and development tools
- Hot reload development server for renderer process

### Runtime Environment
- **Desktop Platforms:** macOS, Windows, Linux via Electron packaging
- **Memory Requirements:** < 100MB typical usage (mostly UI and small JSON files)
- **Storage Requirements:** < 10MB installation, < 1MB user data
- **Performance Targets:** < 2s startup, < 500ms context generation

### Security Considerations
- No network access required (local-only application)
- Standard Electron security practices (disabled node integration in renderer)
- Local file access limited to application data directory
- No sensitive data transmission or storage

### Deployment Strategy
- Electron packaging for platform-specific installers
- Code signing for macOS and Windows distribution
- Automated build pipeline for multi-platform releases
- Local installation, no server infrastructure required